webpackJsonp([3],{JSHn:function(t,e){},nnPb:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("woOf"),m=o.n(r),a=(o("+skl"),o("BTaQ")),s={name:"demoEditor",props:["html","css","js"],components:{Input:a.Input},data:function(){return{demo_html:this.html,demo_css:this.css,demo_js:this.js}},methods:{codeToDemo:function(){return'\n      <!DOCTYPE html>\n      <html lang="en">\n        <head>\n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <meta http-equiv="X-UA-Compatible" content="ie=edge">\n          <title>demo</title>\n        </head>\n        <style>\n          '+this.demo_css+"\n        </style>\n        <body>\n          "+this.demo_html+"\n          <script>"+this.demo_js+"<\/script>\n        </body>\n        </html>\n      "},reader:function(t){var e=this.codeToDemo();return document.getElementById("ifm").srcdoc=e,e}},watch:{html:function(t){this.demo_html=this.html},css:function(t){this.demo_css=this.css},js:function(t){this.demo_js=this.js},demo_html:function(t){var e=this.reader().trim();this.$emit("codeChange",{html:this.demo_html,content:e})},demo_css:function(t){var e=this.reader().trim();this.$emit("codeChange",{css:this.demo_css,content:e})},demo_js:function(t){var e=this.reader().trim();this.$emit("codeChange",{js:this.demo_js,content:e})}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"demo-editor"},[o("Input",{attrs:{type:"textarea",rows:6,placeholder:"html..."},model:{value:t.demo_html,callback:function(e){t.demo_html=e},expression:"demo_html"}}),t._v(" "),o("i"),t._v(" "),o("Input",{attrs:{type:"textarea",rows:6,placeholder:"css..."},model:{value:t.demo_css,callback:function(e){t.demo_css=e},expression:"demo_css"}}),t._v(" "),o("i"),t._v(" "),o("Input",{attrs:{type:"textarea",rows:6,placeholder:"js..."},model:{value:t.demo_js,callback:function(e){t.demo_js=e},expression:"demo_js"}})],1),t._v(" "),o("iframe",{staticStyle:{height:"600px"},attrs:{id:"ifm",frameborder:"0"}})])},staticRenderFns:[]};var n=o("VU/8")(s,i,!1,function(t){o("JSHn")},null,null).exports,d=(o("pw1w"),o("OS1Z")),l=o("gyMJ"),c={components:{mavonEditor:d.mavonEditor,demoEditor:n,Form:a.Form,FormItem:a.FormItem,Button:a.Button,Col:a.Col,Row:a.Row,CheckboxGroup:a.CheckboxGroup,Checkbox:a.Checkbox,RadioGroup:a.RadioGroup,Radio:a.Radio,DatePicker:a.DatePicker,TimePicker:a.TimePicker,Select:a.Select,Option:a.Option,Input:a.Input},data:function(){return{formItem:{id:"",title:"",date:new Date,time:new Date,create_time:[],markdown:"",description:"",html:"",direct_url:0,status:1,css:"",js:"",content:""},ruleInline:{status:[{required:!0,message:"请选择状态"}],title:[{required:!0,message:"demo标题必须填写"}],date:[{required:!0,message:"发布日期必须选择"}],time:[{required:!0,message:"发布时间必须选择"}]}}},methods:{demo:function(){var t=this;this.formItem.description=this.$refs.md.d_render;var e=this.formItem.date.getMonth()+1,o=this.formItem.date.getDate();e>=1&&e<=9&&(e="0"+e),o>=0&&o<=9&&(o="0"+o),this.formItem.create_time=this.formItem.date.getFullYear()+"-"+e+"-"+o+" "+this.formItem.date.getHours()+":"+this.formItem.date.getMinutes()+":"+this.formItem.date.getSeconds(),this.$refs.formItem.validate(function(e){e?t.formItem.id?l.e.update(t.formItem.id,t.formItem).then(function(e){0==e.errno&&e.data.id&&t.$router.push("/demo/list")}):l.e.create(t.formItem).then(function(e){0==e.errno&&e.data.id&&t.$router.push("/demo/list")}):t.$Message.error("请填写必要信息")})},get:function(t){var e=this;l.e.getInfo(t).then(function(t){var o=[];for(var r in t.data.tag)o.push(t.data.tag[r].id);t.data.tag=o,t.data.date=new Date(1e3*t.data.create_time),t.data.time=new Date(1e3*t.data.create_time),console.log(t.data),e.formItem=t.data})},codeChange:function(t){t&&m()(this.formItem,t)},imgAdd:function(t,e){var o=this,r=new FormData;r.append("image",e),l.f.upload(r).then(function(e){0==e.errno&&e.data.url&&o.$refs.md.$img2Url(t,e.data.url)})}},mounted:function(){this.$route.query.slug&&this.get(this.$route.query.slug)}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleInline,"label-width":80}},[o("FormItem",{attrs:{label:"状态",prop:"status"}},[o("RadioGroup",{model:{value:t.formItem.status,callback:function(e){t.$set(t.formItem,"status",e)},expression:"formItem.status"}},[o("Radio",{attrs:{label:0}},[t._v("草稿")]),t._v(" "),o("Radio",{attrs:{label:1}},[t._v("发布")])],1)],1),t._v(" "),o("FormItem",{attrs:{label:"demo标题",prop:"title"}},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"demo标题"},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),t._v(" "),o("FormItem",{attrs:{label:"demo标识",prop:"slug"}},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"demo唯一标识，并作为参数构造url"},model:{value:t.formItem.slug,callback:function(e){t.$set(t.formItem,"slug",e)},expression:"formItem.slug"}})],1),t._v(" "),o("FormItem",{attrs:{label:"跳转展现",prop:"direct_url"}},[o("RadioGroup",{model:{value:t.formItem.direct_url,callback:function(e){t.$set(t.formItem,"direct_url",e)},expression:"formItem.direct_url"}},[o("Radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),o("Radio",{attrs:{label:1}},[t._v("是")])],1)],1),t._v(" "),o("FormItem",{attrs:{label:"缩略图",prop:"thumb"}},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"使用编辑器上传得到地址"},model:{value:t.formItem.thumb,callback:function(e){t.$set(t.formItem,"thumb",e)},expression:"formItem.thumb"}})],1),t._v(" "),o("FormItem",{attrs:{label:"发布时间",prop:"date"}},[o("Row",[o("Col",{staticStyle:{width:"200px"},attrs:{span:"3"}},[o("FormItem",{attrs:{prop:"date"}},[o("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:t.formItem.date,callback:function(e){t.$set(t.formItem,"date",e)},expression:"formItem.date"}})],1)],1),t._v(" "),o("Col",{staticStyle:{width:"200px"},attrs:{span:"3"}},[o("FormItem",{attrs:{prop:"time"}},[o("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:t.formItem.time,callback:function(e){t.$set(t.formItem,"time",e)},expression:"formItem.time"}})],1)],1)],1)],1),t._v(" "),o("FormItem",{attrs:{label:"相关描述",prop:"description"}},[o("div",{attrs:{id:"editor"}},[o("mavon-editor",{ref:"md",staticClass:"editor",on:{imgAdd:t.imgAdd},model:{value:t.formItem.markdown,callback:function(e){t.$set(t.formItem,"markdown",e)},expression:"formItem.markdown"}})],1)]),t._v(" "),o("FormItem",{attrs:{label:"demo内容"}},[o("div",{attrs:{id:"demo-content"}},[o("demo-editor",{attrs:{html:t.formItem.html,css:t.formItem.css,js:t.formItem.js},on:{codeChange:t.codeChange}})],1)]),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:t.demo}},[t._v("提交")])],1)],1)},staticRenderFns:[]},h=o("VU/8")(c,u,!1,null,null,null);e.default=h.exports}});
//# sourceMappingURL=3.ddbb11ac00662ed832b1.js.map